---
/**
 * Now Page
 * Displays current focus areas and what I'm thinking about.
 * Content is stored as MDX in the now collection for easy updates.
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Fetch the single now page entry
const nowEntries = await getCollection('now');
const entry = nowEntries[0];

// Render MDX content
const { Content } = await entry.render();

/**
 * Formats a date for display
 */
function formatDate(date: Date): string {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}
---

<BaseLayout
  title="Now - Saurabh Sarin"
  description={entry.data.description}
>
  <article class="now-page">
    <section class="intro">
      <h1>Now</h1>
      <p class="subtitle">
        Last updated: {formatDate(entry.data.lastUpdated)}
      </p>
    </section>

    <section class="now-content">
      <Content />
    </section>
  </article>
</BaseLayout>

<style>
  /* Now Page Styles
   * Follows global.css patterns with text-first, calm aesthetic
   */

  .now-page {
    /* Page container inherits main styling from global.css */
  }

  /* Intro Section - matches other pages */
  .intro {
    margin-bottom: 3rem;
  }

  .intro h1 {
    /* Uses h1 styling from global.css: 1.75rem/600 */
    margin-bottom: 1rem;
  }

  .subtitle {
    font-size: 1.125rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
    margin-bottom: 0;
  }

  /* Now Content - MDX inherits global typography */
  .now-content {
    margin-bottom: 2rem;
  }
</style>
